<!DOCTYPE html>
{% load static %}

<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Library Management System</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<!-- jQuery UI for Autocomplete -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">



<style type="text/css">
    .bs-example{
        margin: 0px;

    }
.navbar-brand{
  font-size: 20px;
  font-family: sans-serif;

}
.col-lg-6{
  padding-left: 20%;
}
.jumbotron{
  margin-bottom: 0px;
}
.bestseller-bar {
  width: 100%;
  overflow: hidden;
  background: linear-gradient(to right, #00416a, #e4e5e6);
  color: black;
  white-space: nowrap;
  padding: 10px 0;
  position: relative;
}

.bestseller-track {
  display: inline-block;
  padding-left: 100%;
  animation: scroll-left 25s linear infinite;
}

.bestseller-item {
  display: inline-block;
  margin-right: 80px;
  font-size: 1rem;
  font-weight: bold;
}

@keyframes scroll-left {
  0%   { transform: translateX(0); }
  100% { transform: translateX(-100%); }
}

  #book_Search {
    border: 2px solid #007bff;
    border-radius: 10px;
  }

  .ui-autocomplete {
    z-index: 1050;
    background: white;
    border: 1px solid #ddd;
    border-radius: 5px;
    max-height: 300px;
    overflow-y: auto;
    font-size: 16px;
    padding: 5px 0;
  }

  .ui-menu-item-wrapper {
    padding: 10px 20px;
    cursor: pointer;
  }

  .ui-menu-item-wrapper:hover {
    background-color: #f0f8ff;
    color: #007bff;
  }
#book-results li:hover {
  background-color: #f0f0f0;
  cursor: pointer;
}

.scrolling-books {
  font-size: 1.1rem;
  background-color: #212529;
  border-radius: 10px;
}
.scrolling-books strong {
  color: 
#ffc107;
}
.scrolling-books em {
  color: #adb5bd;
}
.genre-card {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.genre-img {
  height: 250px; /* Or any fixed height you want */
  object-fit: contain; /* Ensures the full image fits without cropping */
  padding: 10px;
  background-color: #f8f9fa; /* Optional: adds background if image doesn't fill area */
}

  .bestseller-section {
    background-color: #dbc594ff;
    {% comment %} border-left: 8px solid #f4a261; {% endcomment %}
    padding: 10px 15px;
    border-radius: 8px;
    margin-top: 20px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
  }

  .bestseller-title {
    font-weight: bold;
    font-size: 20px;
    margin-bottom: 10px;
    color: #e76f51;
  }

  .bestseller-link {
    font-weight: 500;
    color: #264653;
    text-decoration: none;
    margin-right: 20px;
    white-space: nowrap;
  }

  .bestseller-link:hover {
    text-decoration: underline;
    color: #e76f51;
  }
  @media (max-width: 768px) {
    .card-img-top {
      height: 200px !important;
    }
  }
   #search-suggestions {
    position: absolute;
    z-index: 999;
    width: 100%;
  }
</style>
</head>
<body>




{% include "library/navbar.html" %}
<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block w-100 " height="500px" src="{% static "images/librarybg.jpg" %}" alt="First slide">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100 " height="500px" src="{% static "images/librarybg2.jpg" %}" alt="Second slide">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100 " height="500px" src="{% static "images/librarybg3.jpg" %}" alt="Third slide">
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<div class="container my-5">
   <h2 class="text-center mb-4">üîç Search for a Book</h2>
  <input type="text" id="book-search" class="form-control" placeholder="Search for books...">
  <div id="search-suggestions" class="list-group mt-2"></div>
</div>



<div class="jumbotron">
  <h1 style="text-align:center" class="display-4">Library Management System</h1>
  <p class="lead">Welcome to our Library ‚Äî your gateway to knowledge and discovery. Our library offers easy access to educational, fictional, and reference materials for readers of all ages. Whether you're a student, researcher, or book lover, you'll find something to spark your curiosity. Search, borrow, and enjoy ‚Äî anytime, anywhere.A service dedicated to Admin and Student. We provide online resources, professional support
    and guidance to all our students whenever, and from wherever they have chosen to study.</p>
  <hr class="my-4">
</div>


<div class="bestseller-section">
  <div class="bestseller-title">üåü Bestseller Books:</div>
  <marquee behavior="scroll" direction="left">
    {% for book in bestsellers %}
      <a href="{% url 'book_detail' genre_id=book.genre.id pk=book.id %}" class="bestseller-link">
        üìö {{ book.name }} ({{ book.genre.name }})
      </a>
    {% empty %}
      <span>No bestsellers available right now.</span>
    {% endfor %}
  </marquee>
</div>

<div class="container my-5">
  <h2 class="text-center mb-4 text-primary font-weight-bold">üìö Explore Our Collection</h2>
  <div class="row">
    {% for genre in genres %}
      <div class="col-md-3 col-sm-6 mb-4 d-flex">
        <a href="{% url 'genre_books' genre.id %}" class="text-decoration-none w-100">
          <div class="card shadow-sm h-100">
            <img src="{{ genre.image.url }}" class="card-img-top img-fluid" alt="{{ genre.name }}" style="height: 200px; object-fit: cover;">
            <div class="card-body text-center">
              <h5 class="card-title mb-0 text-dark font-weight-bold">{{ genre.name }}</h5>
            </div>
          </div>
        </a>
      </div>
    {% empty %}
      <div class="col-12 text-center">
        <p class="text-muted">No genres available at the moment.</p>
      </div>
    {% endfor %}
  </div>
</div>


<div class="container mt-5">
  <h4 class="mb-4 font-weight-bold text-primary">
    üÜï Newly Published Books <small class="text-muted">(Last 30 Days)</small>
  </h4>
  <div class="row">
    {% for book in newly_published %}
      <div class="col-md-3 col-sm-6 mb-4 d-flex">
        <div class="card shadow-sm w-100">
          <a href="{% url 'book_detail' genre_id=book.genre.id pk=book.id %}">
            {% comment %} <img src="{{ book.image.url }}" class="card-img-top img-fluid" alt="{{ book.name }}" style="height: 250px; object-fit: cover;"> {% endcomment %}
          {% if book.image and book.image.name %}
            <img src="{{ book.image.url }}" class="card-img-top img-fluid" alt="{{ book.name }}" style="height: 250px; object-fit: cover;">
          {% else %}
            <img src="{% static 'images/default-book.jpg' %}" class="card-img-top img-fluid" alt="Default Image" style="height: 250px; object-fit: cover;">
          {% endif %}

          </a>
          <div class="card-body">
            <h6 class="card-title mb-1 font-weight-bold">{{ book.name }}</h6>
            <p class="card-text mb-1 text-muted">{{ book.genre.name }}</p>
            <span class="badge badge-info">üìò Newly Published</span>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="col-12 text-center">
        <p class="text-muted">No newly published books available right now.</p>
      </div>
    {% endfor %}
  </div>
</div>

{% include "library/footer.html" %}

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const searchInput = document.getElementById("book-search");
    const suggestionsBox = document.getElementById("search-suggestions");

    searchInput.addEventListener("keyup", function () {
      const query = this.value.trim();

      if (query.length > 0) {
        fetch(`/search-suggestions/?q=${encodeURIComponent(query)}`)
          .then(response => response.json())
          .then(data => {
            suggestionsBox.innerHTML = "";

            if (data.results.length > 0) {
              data.results.forEach(book => {
                const item = document.createElement("a");
                item.href = `/genre/${book.genre_id}/book/${book.id}/`;
                item.className = "list-group-item list-group-item-action";
                item.textContent = `${book.name} (${book.status})`;
                suggestionsBox.appendChild(item);
              });
            } else {
              suggestionsBox.innerHTML = `<div class="list-group-item disabled">No matches found</div>`;
            }
          });
      } else {
        suggestionsBox.innerHTML = "";
      }
    });

    document.addEventListener("click", function (e) {
      if (!suggestionsBox.contains(e.target) && e.target !== searchInput) {
        suggestionsBox.innerHTML = "";
      }
    });
  });

     {% comment %} document.addEventListener('DOMContentLoaded', function () {
    const dropdownToggle = document.querySelector('.dropdown-toggle');
    const dropdownMenu = document.querySelector('.dropdown-menu');

    dropdownToggle.addEventListener('click', function (e) {
      e.preventDefault();
      dropdownMenu.classList.toggle('show');
    });

    // Optional: close dropdown when clicking outside
    document.addEventListener('click', function (e) {
      if (!dropdownToggle.contains(e.target) && !dropdownMenu.contains(e.target)) {
        dropdownMenu.classList.remove('show');
      }
    });
  }); {% endcomment %}
</script>




</body>
</html>
