 {% load static %}
<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<!-- jQuery UI for Autocomplete -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<!-- Font Awesome CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-a7XyfhRJjK5nblhDAu9ZbKUErL8ZOf0PKG1odI3E14OwEr6lJ+jr2dXqs70vhkm3sWa+nqvuyfw9AvC7ufPpgA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
 <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <link rel="stylesheet" href="{% static 'library/css/navbar.css' %}"><!-- jQuery (Required by Bootstrap) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Popper.js (for Bootstrap dropdowns & collapse) -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>


</head>


  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
   
   {% comment %} {% if request.user.is_authenticated and request.user.is_superuser %}   {% endcomment %}
   {% if request.user.is_authenticated and request.user.is_superuser and request.resolver_match.url_name != 'home' %}
     <button class="btn btn-outline-light d-md-none mr-2" id="sidebarToggle">
      <i class="fa fa-bars"></i>
     </button> 
    {% endif %} 
  

  {% comment %} <nav class="navbar navbar-expand-lg navbar-light bg-dark"> {% endcomment %}
  <a class="navbar-brand" href="/">
    {% if library_settings.logo %}
      <img src="{{ library_settings.logo.url }}" alt="Logo" style="height: 40px;">
    {% endif %}
    {{ library_settings.brand_name|default:"Library System" }}
  </a>
{% comment %} </nav> {% endcomment %}

  <button class="navbar-toggler" type="button" data-toggle="collapse"
    data-target="#navbarCollapse" aria-controls="navbarCollapse"
    aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarCollapse">
    <div class="navbar-nav ml-auto">

      {% if request.user.is_authenticated and request.user.is_superuser %}
        <a href="{% url 'admin_dashboard' %}" class="nav-item nav-link">
          <i class="fa fa-tachometer-alt"></i> Admin Dashboard
        </a>
        <a href="{% url 'admin_logout' %}" class="nav-item nav-link">
          <i class="fa fa-sign-out-alt"></i> Logout
        </a>
        <a href="{% url 'student_login' %}?next={% url 'home' %}" class="nav-item nav-link">
          <i class="fa fa-user-graduate"></i> Student
        </a>

      {% elif request.user.is_authenticated %}
        <a href="/" class="nav-item nav-link {% if request.path == '/' %}active{% endif %}">
          <i class="fa fa-home"></i> Home
        </a>
        <a href="{% url 'student_dashboard' %}" class="nav-item nav-link">
          <i class="fa fa-gauge"></i> {{ request.user.username }}'s  Dashboard
        </a>
        <a href="{% url 'student_issued_books' %}" class="nav-item nav-link">
          <i class="fa fa-book-reader"></i> Order Details
        </a>
        <a href="{% url 'student_logout' %}" class="nav-item nav-link">
          <i class="fa fa-sign-out-alt"></i> Logout
        </a>

       

      {% else %}
        <a href="/" class="nav-item nav-link {% if request.path == '/' %}active{% endif %}">
          <i class="fa fa-home"></i> Home
        </a>
        <a href="{% url 'student_login' %}" class="nav-item nav-link">
          <i class="fa fa-user-graduate"></i> Student
        </a>
      {% endif %}

    </div>
  </div>
</nav>



{% with request.resolver_match.url_name as current_url %}
  {% if request.user.is_authenticated and request.user.is_superuser %}
    {% if current_url in "admin_dashboard add_book view_books view_donated_books edit_donate_book add_genre view_genres edit_course_department edit_holiday edit_genre issue_book view_issued_books holiday_list student_signup view_students manage_footer edit_library_settings edit_student edit_book donate_book manage_course_department return_book" %}
      
      <!-- Admin Sidebar -->
      <div class="admin-sidebar" id="adminSidebar">
        <h5 class="sidebar-title">ğŸ“˜ Admin Menu</h5>
        <a href="{% url 'admin_dashboard' %}">ğŸ  Dashboard</a>
        
        <a href="{% url 'view_books' %}">ğŸ“š View Books</a>
        <a href="{% url 'view_donated_books' %}">ğŸ Donated Books</a>
       
        <a href="{% url 'view_genres' %}">ğŸ—‚ï¸ View Genres</a>
        <a href="{% url 'issue_book' %}">ğŸ“¤ Issue Book</a>
        <a href="{% url 'return_book' %}">ğŸ“¤ Return Book</a>
        <a href="{% url 'view_issued_books' %}">ğŸ§¾ View Issued Books</a>
        <a href="{% url 'manage_course_department' %}">ğŸ“ Add Course & Department</a>
        <a href="{% url 'view_students' %}">ğŸ‘¥ View Students</a>
        <a href="{% url 'holiday_list' %}">ğŸ“… Manage Holiday </a>
        <a href="{% url 'manage_footer' %}">ğŸ¦¶ Manage Footer</a>
        <a href="{% url 'edit_library_settings' %}">âš™ï¸ Library Settings</a>
      </div>

      
      <style>
        /* Default sidebar */
.admin-sidebar {
  width: 250px;
  height: 100%;
  position: fixed;
  top: 0;
  left: 0;
  background-color: #343a40;
  color: white;
  padding-top: 56px; /* to avoid navbar overlap */
  transition: transform 0.3s ease-in-out;
  z-index: 1050;
}

/* Hide sidebar on mobile initially */
@media (max-width: 768px) {
  .admin-sidebar {
    transform: translateX(-100%);
    transition: transform 0.3s ease-in-out;
  }

  /* Show when toggled */
  .admin-sidebar.show-sidebar {
    transform: translateX(0);
  }

  body {
    padding-left: 0 !important;
  }
}

         .admin-sidebar {
            position: fixed;
            top: 56px;
            left: 0;
            width: 230px;
            height: calc(100vh - 56px); /* Full height minus navbar */
            background-color: #343a40;
            color: white;
            padding: 20px;
            z-index: 1030;
            overflow-y: auto;
          }


        .admin-sidebar a {
          display: block;
          color: #ddd;
          padding: 10px 15px;
          text-decoration: none;
          border-radius: 5px;
          margin-bottom: 8px;
          transition: all 0.2s ease;
        }

        .admin-sidebar a:hover {
          background-color: #495057;
          font-weight: bold;
          color: white;
        }

        .sidebar-title {
          font-size: 18px;
          font-weight: bold;
          color: #f8f9fa;
          margin-bottom: 20px;
        }

        body {
          padding-left: 230px;
        }

        

        body {
          padding-top: 70px;
        }

        .navbar-brand {
          font-size: 1.25rem;
          font-weight: bold;
        }

        .navbar-nav .nav-link i {
          margin-right: 6px;
        }

        .navbar-toggler {
          font-size: 1.2rem;
          padding: 0.4rem 0.7rem;
        }
      </style>

      
    {% endif %}
  {% endif %}
{% endwith %} 

<script>
  document.getElementById('sidebarToggle').addEventListener('click', function () {
    const sidebar = document.getElementById('adminSidebar');
    sidebar.classList.toggle('show-sidebar');
    document.body.classList.toggle('sidebar-open');
  });

  // Close sidebar when clicking outside
  document.addEventListener('click', function (e) {
    const sidebar = document.getElementById('adminSidebar');
    const toggle = document.getElementById('sidebarToggle');
    if (!sidebar.contains(e.target) && !toggle.contains(e.target)) {
      sidebar.classList.remove('show-sidebar');
    }
  });
</script>
